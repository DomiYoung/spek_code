#!/bin/bash
# Claude Code Production-Grade Best Practice: Explore, Plan, Code, Test Workflow
# Based on Anthropic's recommended enterprise-level development practices
# Version: 1.0.0

cat << 'EOF'
################################################################################
ðŸ­ PRODUCTION-GRADE EXPLORE, PLAN, CODE, TEST WORKFLOW
################################################################################

TASK: $@
DATE: $(date)
WORKFLOW VERSION: 1.0.0

This workflow implements enterprise-level development practices with:
- Comprehensive exploration and analysis
- Detailed technical planning and risk assessment
- Quality-focused implementation
- Multi-layered testing strategy
- Complete documentation and handoff

################################################################################
ðŸ” PHASE 1: COMPREHENSIVE EXPLORATION
################################################################################

I will conduct a thorough analysis using parallel Task agents to:

CODEBASE ANALYSIS:
â–¡ Identify all files related to the implementation scope
â–¡ Map dependencies and integration points
â–¡ Analyze existing patterns and architectural decisions
â–¡ Review similar features for consistency
â–¡ Identify reusable components and utilities

TECHNICAL ASSESSMENT:
â–¡ Evaluate current system architecture
â–¡ Identify performance implications
â–¡ Assess security considerations
â–¡ Review scalability requirements
â–¡ Check compliance with coding standards

IMPACT ANALYSIS:
â–¡ Map affected systems and components
â–¡ Identify breaking change risks
â–¡ Assess backward compatibility requirements
â–¡ Evaluate database migration needs
â–¡ Check API versioning implications

RESOURCE REQUIREMENTS:
â–¡ Estimate development complexity
â–¡ Identify required skills and expertise
â–¡ Assess testing resource needs
â–¡ Plan deployment requirements
â–¡ Consider monitoring and observability

################################################################################
ðŸ“‹ PHASE 2: DETAILED TECHNICAL PLANNING
################################################################################

Based on comprehensive exploration, I will create an enterprise-grade plan:

1. EXECUTIVE SUMMARY
   - Business objective and success metrics
   - Technical scope and deliverables
   - Timeline and resource allocation
   - Risk assessment and mitigation strategies

2. TECHNICAL ARCHITECTURE
   - System design and component interaction
   - Data flow and state management
   - API design and contract specifications
   - Security architecture and threat model
   - Performance requirements and SLAs

3. IMPLEMENTATION STRATEGY
   - Development phases and milestones
   - Feature flags and rollout strategy
   - Database schema changes and migrations
   - Configuration management
   - Dependency management

4. QUALITY ASSURANCE PLAN
   - Unit testing strategy and coverage targets
   - Integration testing approach
   - End-to-end testing scenarios
   - Performance testing requirements
   - Security testing checklist

5. DEPLOYMENT STRATEGY
   - Environment progression (dev â†’ staging â†’ prod)
   - Deployment automation and rollback plans
   - Infrastructure requirements
   - Monitoring and alerting setup
   - Documentation and runbook creation

6. RISK MANAGEMENT
   - Technical risks and mitigation plans
   - Performance bottlenecks and solutions
   - Security vulnerabilities and safeguards
   - Operational risks and contingencies
   - Communication and escalation procedures

7. COMPLIANCE AND STANDARDS
   - Code quality standards and review process
   - Security compliance requirements
   - Performance benchmarks
   - Documentation standards
   - Accessibility requirements (if applicable)

################################################################################
ðŸ’» PHASE 3: PRODUCTION-GRADE IMPLEMENTATION
################################################################################

Implementation will follow enterprise development practices:

CODE QUALITY STANDARDS:
â–¡ Follow established coding conventions and style guides
â–¡ Implement comprehensive error handling and logging
â–¡ Use descriptive naming and clear code organization
â–¡ Apply SOLID principles and design patterns
â–¡ Ensure thread safety and concurrency handling

SECURITY IMPLEMENTATION:
â–¡ Input validation and sanitization
â–¡ Authentication and authorization checks
â–¡ Secure data handling and encryption
â–¡ SQL injection and XSS prevention
â–¡ Rate limiting and DoS protection

PERFORMANCE OPTIMIZATION:
â–¡ Efficient algorithms and data structures
â–¡ Database query optimization
â–¡ Caching strategy implementation
â–¡ Resource management and cleanup
â–¡ Memory and CPU usage optimization

MONITORING AND OBSERVABILITY:
â–¡ Comprehensive logging with structured formats
â–¡ Metrics collection and KPI tracking
â–¡ Distributed tracing implementation
â–¡ Health checks and readiness probes
â–¡ Error tracking and alerting

CONFIGURATION MANAGEMENT:
â–¡ Environment-specific configuration
â–¡ Feature flags and toggles
â–¡ Secrets management
â–¡ Configuration validation
â–¡ Hot-reload capabilities where applicable

CODE REVIEW CHECKLIST:
â–¡ Business logic correctness
â–¡ Error handling completeness
â–¡ Performance implications
â–¡ Security considerations
â–¡ Test coverage adequacy
â–¡ Documentation quality

################################################################################
ðŸ§ª PHASE 4: COMPREHENSIVE TESTING STRATEGY
################################################################################

Multi-layered testing approach for production readiness:

UNIT TESTING (Target: >90% coverage):
â–¡ Test all business logic components
â–¡ Test error handling and edge cases
â–¡ Test configuration and environment variations
â–¡ Mock external dependencies appropriately
â–¡ Verify performance characteristics

INTEGRATION TESTING:
â–¡ Test component interactions
â–¡ Test database integration and transactions
â–¡ Test external API integrations
â–¡ Test message queue interactions
â–¡ Test file system and network operations

SYSTEM TESTING:
â–¡ End-to-end workflow validation
â–¡ Cross-browser compatibility (if web)
â–¡ Mobile responsiveness (if applicable)
â–¡ Accessibility compliance (WCAG 2.1)
â–¡ Internationalization and localization

PERFORMANCE TESTING:
â–¡ Load testing with expected traffic patterns
â–¡ Stress testing beyond normal capacity
â–¡ Endurance testing for memory leaks
â–¡ Scalability testing with increasing load
â–¡ Latency and throughput measurements

SECURITY TESTING:
â–¡ Authentication and authorization testing
â–¡ Input validation and injection testing
â–¡ Session management verification
â–¡ HTTPS and certificate validation
â–¡ Penetration testing (if applicable)

OPERATIONAL TESTING:
â–¡ Deployment and rollback procedures
â–¡ Backup and recovery processes
â–¡ Monitoring and alerting verification
â–¡ Log aggregation and analysis
â–¡ Disaster recovery scenarios

ACCEPTANCE TESTING:
â–¡ Business requirement validation
â–¡ User experience verification
â–¡ Accessibility standards compliance
â–¡ Performance SLA verification
â–¡ Documentation completeness

################################################################################
ðŸ“Š PHASE 5: PRODUCTION DOCUMENTATION & HANDOFF
################################################################################

Comprehensive documentation for production systems:

TECHNICAL DOCUMENTATION:
- Architecture Decision Records (ADRs)
- API documentation with OpenAPI/Swagger
- Database schema and migration guides
- Configuration management documentation
- Deployment and operational procedures

CODE DOCUMENTATION:
- Inline code comments for complex logic
- README files with setup and usage instructions
- Contributing guidelines and coding standards
- Troubleshooting guides and FAQs
- Performance tuning recommendations

OPERATIONAL DOCUMENTATION:
- Monitoring and alerting runbooks
- Incident response procedures
- Backup and recovery processes
- Scaling and capacity planning guides
- Security policies and procedures

KNOWLEDGE TRANSFER:
- Code walkthrough sessions
- Architecture presentation
- Operational training materials
- Emergency contact information
- Handoff checklist completion

PULL REQUEST DESCRIPTION TEMPLATE:

## ðŸŽ¯ Summary
Brief description of the implementation and business value

## ðŸ—ï¸ Architecture & Design
- Key architectural decisions and rationale
- Design patterns and principles applied
- Performance and scalability considerations
- Security measures implemented

## ðŸ”§ Implementation Details
- Core components and their responsibilities
- Database changes and migration strategy
- API changes and versioning approach
- Configuration and feature flag usage

## ðŸ“‹ Testing Strategy
- Unit test coverage and approach
- Integration test scenarios
- Performance testing results
- Security testing verification

## ðŸš€ Deployment Plan
- Deployment steps and dependencies
- Environment-specific considerations
- Rollback procedures if needed
- Monitoring and alerting setup

## ðŸ“Š Metrics & Monitoring
- Key performance indicators (KPIs)
- Success metrics and acceptance criteria
- Monitoring dashboards and alerts
- Log analysis and debugging guides

## ðŸ”’ Security Considerations
- Security measures implemented
- Threat model considerations
- Compliance requirements met
- Security testing results

## ðŸ“š Documentation
- Updated documentation links
- API specification changes
- Operational procedure updates
- Training materials created

## âœ… Production Readiness Checklist
- [ ] All tests pass with >90% coverage
- [ ] Performance benchmarks met
- [ ] Security review completed
- [ ] Documentation updated and reviewed
- [ ] Monitoring and alerting configured
- [ ] Deployment procedure tested
- [ ] Rollback plan verified
- [ ] Team training completed

## ðŸ”® Future Considerations
- Technical debt and improvement opportunities
- Scalability roadmap
- Feature enhancement possibilities
- Maintenance and support requirements

################################################################################

READY FOR ENTERPRISE-GRADE DEVELOPMENT!

This workflow ensures:
âœ… Comprehensive analysis and planning
âœ… High-quality, maintainable code
âœ… Robust testing and validation
âœ… Production-ready deployment
âœ… Complete documentation and handoff
âœ… Long-term maintainability

EOF

echo ""
echo "ðŸŽ¯ Production Task: $@"
echo "ðŸ“… Started: $(date)"
echo "ðŸ”§ Workflow: Enterprise Explore-Plan-Code-Test"
echo ""
echo "Ready to begin comprehensive development workflow!"