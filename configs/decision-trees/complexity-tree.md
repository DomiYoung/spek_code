# 决策树 1: 复杂度路由 (Fast Path Router)

**目的**: 决定 Spec-Kit 和 Task Master 的启用

## 决策流程图

```
START: 收到用户任务
│
├─ Q1: 是【分析/理解/解释】任务？（非代码实现）
│   └─ YES → 🟢 轻量路径 (权重=0)
│            • Spec-Kit: ❌  • Task Master: ❌
│            • 模式: --think 或 --think-hard
│
├─ Q2: 是【纯样式/文档/配置】修改？
│   └─ YES → 🟢 轻量路径 (权重=1)
│            • Spec-Kit: ❌  • Task Master: ❌
│            • 直接执行
│
├─ Q3: 是【新功能/重构/Breaking Change】？
│   └─ YES → 🔴 重量路径 (权重=10)
│            • Spec-Kit: ✅ 强制 (5步完整执行)
│            • Task Master: ✅
│            • 模式: --think-hard
│
├─ Q4: 涉及【API/架构/Schema 变更】？
│   └─ YES → 🔴 重量路径 (权重=7-8)
│            • Spec-Kit: ✅  • Task Master: ✅
│
├─ Q5: 变更【>5 文件】或【>200 行代码】？
│   └─ YES → 🟡 中重路径 (权重=8)
│            • Spec-Kit: ✅  • Task Master: ✅
│
├─ Q6: 变更【3-5 文件】的功能代码？
│   └─ YES → 🟡 中等路径 (权重=5)
│            • Spec-Kit: ⚠️ 建议  • Task Master: ✅
│
└─ 其他 (简单 Bug / 小修改)
    └─ → 🟢 简单路径 (权重=2)
         • Spec-Kit: ❌  • Task Master: ⚠️ 可选
         • 直接修复
```

## 快速决策表

| 问题 | YES 答案 | 权重 | Spec-Kit | Task Master |
|------|---------|------|----------|-------------|
| Q1: 分析/理解任务？ | → 轻量 | 0 | ❌ | ❌ |
| Q2: 样式/文档？ | → 轻量 | 1 | ❌ | ❌ |
| Q3: 新功能/重构？ | → 重量 | 10 | ✅ | ✅ |
| Q4: API/架构变更？ | → 重量 | 7-8 | ✅ | ✅ |
| Q5: >5 文件？ | → 中重 | 8 | ✅ | ✅ |
| Q6: 3-5 文件功能？ | → 中等 | 5 | ⚠️ | ✅ |
| 默认 | → 简单 | 2 | ❌ | ⚠️ |

## Early Exit 原则

- **80% 任务**在 Q1-Q3 决定
- 前 2 个问题是"轻量过滤器"
- Q3 是"重量捕获器"
