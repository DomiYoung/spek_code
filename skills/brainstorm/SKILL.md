---
name: brainstorm
description: |
  脑暴专家 - 多轮对话式方案探索与设计。
  Use when:
  - 寻求多种可能方案（explore 意图）
  - 在方案中做选择（decide 意图）
  - 架构决策、技术选型对比
  - 任何创意工作、新功能、组件构建前
  触发词：脑暴、方案对比、你觉得、建议、哪种更好、有几种、探索
  Related Skills: experts/architect, mermaid-expert, planning-with-files
---

# Brainstorm（脑暴专家）

> **Skill 类型**：Dialogue-driven（对话驱动型）
> **核心理念**：一次一问，渐进验证。通过多轮对话将想法转化为完整设计。

---

## Quick Start

```
触发脑暴 → 上下文理解 → 多轮追问(5-8轮) → 方案探索 → 分段呈现设计 → 确认启动开发
```

---

## 核心流程（The Process）

### Phase 1：理解想法（5-8 轮追问）

**启动**：
- 先检查项目当前状态（文件、文档、最近提交）
- 一次只问一个问题，逐步细化想法

**🔴 强制使用 AskUserQuestion 工具**：
- **每一轮追问必须使用 AskUserQuestion 工具**
- **禁止直接在消息中提问后等待回复**
- **必须通过工具提供选项让用户选择**

**提问原则**：
- **一次一问** - 每条消息只包含一个问题
- **优先选择题** - 尽可能提供 2-3 个选项让用户选择
- **开放式补充** - 选择题无法覆盖时使用开放式问题

**追问焦点**：
```
第 1-2 轮：目的 - "这个功能要解决什么问题？"（使用 AskUserQuestion）
第 3-4 轮：约束 - "有什么技术/时间/资源限制？"（使用 AskUserQuestion）
第 5-6 轮：成功标准 - "怎样算做好了？"（使用 AskUserQuestion）
第 7-8 轮：边界情况 - "需要处理哪些特殊情况？"（使用 AskUserQuestion）
```

### Phase 2：探索方案

当充分理解需求后：
- 提出 2-3 种不同方案及其权衡
- **先给推荐**，再解释理由
- 以对话方式呈现，不要一次性倾倒
- **🔴 使用 AskUserQuestion 让用户选择方案**

**输出格式**：
```markdown
我建议采用 **方案 A：[名称]**

**核心思路**：[1-2 句]
**为什么推荐**：[理由]

其他可选方案：
- 方案 B：[名称] - [一句话描述] - 适合 [场景]
- 方案 C：[名称] - [一句话描述] - 适合 [场景]
```

**然后必须使用 AskUserQuestion 工具**：
- 提供方案 A/B/C 作为选项
- 让用户选择或提供其他想法

### Phase 3：分段呈现设计

确定方案后，分段呈现详细设计：

**每段 200-300 字**，涵盖：
1. 架构概览
2. 核心组件
3. 数据流
4. 错误处理
5. 测试策略

**🔴 每段后必须使用 AskUserQuestion 确认**：
- 提供"确认继续"/"需要调整"/"回退上一步"选项
- 不要直接在消息中问"看起来对吗？"

### Phase 4：确认启动开发

设计验证完成后，**必须使用 AskUserQuestion 工具询问**：

**选项设置**：
- 选项 1: 保存设计文档到 `docs/plans/`
- 选项 2: 准备好开始实现
- 选项 3: 还需要调整某些部分

**只有用户明确选择后才进入下一阶段**。

---

## 触发条件

由 `workflow-orchestrator` 通过 **AI 语义判断** 自动检测：

| 意图类型 | 特征描述 | 示例 |
|---------|---------|------|
| **explore** | 寻求多种可能方案 | "这个功能有几种实现方式？" |
| **decide** | 在已知方案中选择 | "A 和 B 哪个更适合？" |
| **create** | 创建新功能/组件 | "我想做一个..." |

---

## 脑暴模式

### 模式 1：技术方案探索

**场景**：功能实现有多种技术路线

```yaml
输入: "这个功能用什么技术实现比较好？"
输出:
  - 至少 3 个技术方案
  - 每个方案的复杂度评估
  - 推荐方案及理由
```

### 模式 2：架构决策

**场景**：系统设计需要权衡

```yaml
输入: "这个系统应该怎么设计？"
输出:
  - 2-3 种架构模式
  - 可扩展性、维护性、成本对比
  - 推荐架构及理由
```

### 模式 3：问题诊断

**场景**：不确定问题根因

```yaml
输入: "这个问题可能是什么原因？"
输出:
  - 可能的根因列表（概率排序）
  - 排查步骤建议
  - 验证方法
```

### 模式 4：创意探索

**场景**：开放式头脑风暴

```yaml
输入: "有什么好的想法？"
输出:
  - 至少 5 个创意点
  - 按可行性/影响力分类
  - 推荐下一步行动
```

---

## 专家角色（原 SuperClaude Agents）

脑暴时可调用以下专家视角：

| 专家 | 关注点 | 典型问题 |
|------|--------|---------|
| **架构师** | 系统设计、可扩展性 | "从架构角度看..." |
| **前端专家** | 用户体验、交互 | "从用户体验角度..." |
| **后端专家** | 性能、稳定性 | "从性能角度看..." |
| **安全工程师** | 安全风险 | "从安全角度看..." |
| **质量工程师** | 可测试性、可维护性 | "从质量角度..." |

### 多专家会诊

复杂问题可同时调用多个专家视角：

```markdown
## 多专家会诊

**🏗️ 架构师观点**: ...
**🎨 前端专家观点**: ...
**⚡ 性能工程师观点**: ...

**综合建议**: ...
```

---

## 苏格拉底式引导

对于学习类场景，使用提问引导：

```yaml
level_1_观察: "你注意到这段代码有什么特点？"
level_2_模式: "为什么这种设计会出现？"
level_3_原理: "这背后是什么设计原则？"
level_4_应用: "如何在其他地方应用这个原则？"
```

---

## Critical Guidelines

1. **🔴 AskUserQuestion 强制** - 每个决策点必须使用 AskUserQuestion 工具
2. **一次一问** - 不要用多个问题轰炸用户
3. **优先选择题** - 比开放式问题更容易回答
4. **YAGNI 原则** - 无情砍掉不必要的功能
5. **探索替代方案** - 确定方案前至少提 2-3 种选择
6. **渐进验证** - 分段呈现设计，逐段确认
7. **门控开发** - 设计确认前不进入实现阶段
8. **灵活回退** - 随时可以回头澄清
9. **禁止单轮结束** - 脑暴必须是多轮对话，不能一轮就结束

---

## 与 planning-with-files 衔接

脑暴完成后，根据用户选择：

| 用户选择 | 下一步 |
|---------|--------|
| 保存设计文档 | 写入 `docs/plans/` 并 git commit |
| 启动开发 | 触发 `planning-with-files` → 创建 `.planning/task_plan.md` → 执行 |
| 调整设计 | 继续 Phase 3 分段讨论 |

**衔接点**：脑暴产出的设计文档可直接作为 `planning-with-files` 的输入。
